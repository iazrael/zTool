(function(e){var h={UNDEFINED:0,BUILDED:1,LOADED:2,INITED:3},i={},j={},a=function(b){if(i[b])return i[b];var b=b.split("."),f=window,d;for(d in b){if(!(b[d]in f))return e;f=f[b[d]]}return f},k=function(b){return(b=a(b))?b.packageStatus:h.UNDEFINED},l=function(b,f,c){"string"===typeof b&&(b=a(b));var g={},e=a("Z");if(f)for(var i in f)g[i]=a(f[i]);c&&c.call(b,e,g);b.packageStatus=h.INITED;b=b.packageName;if(f=j[b]){for(g=0;g<f.length;g++)c=f[g],d(c.requirePackages)&&l(c.packageName,c.requirePackages,
c.constructor);delete j[b]}},d=function(b){if(!b)return!0;var d,c;for(c in b)if(d=b[c],k(d)!==h.INITED)return!1;return!0},c=function(){var b,c,a;b=arguments[0];3===arguments.length?(c=arguments[1],a=arguments[2]):a=arguments[1];var g;g=i[b];if(!g){g=window;var e=b.split("."),k;for(k in e)e[k]in g||(g[e[k]]={}),g=g[e[k]];i[b]=g}if(!("packageName"in g))g.packageName=b;if(!("packageStatus"in g))g.packageStatus=h.BUILDED;if(g.packageStatus===h.BUILDED)g.packageStatus=h.LOADED;if(c&&!d(c))for(var m in c)g=
c[m],j[g]||(j[g]=[]),j[g].push({packageName:b,requirePackages:c,constructor:a});else l(g,c,a)};c("Z",function(b){b.PACKAGE_STATUS=h;b.$package=c;b.getPackage=a;b.getPackageStatus=k})})();
Z.$package("Z",function(e){this.debug=function(a){window.console&&(console.debug?console.debug(a):console.log(a))};var h=Object.prototype.toString;this.isString=function(a){return"[object String]"===h.call(a)};this.isArray=Array.isArray||function(a){return"[object Array]"===h.call(a)};this.isArguments=function(a){return"[object Arguments]"===h.call(a)};this.isObject=function(a){return"[object Object]"===h.call(a)};this.isFunction=function(a){return"[object Function]"===h.call(a)};this.isUndefined=
function(a){return"[object Undefined]"===h.call(a)};this.isEmpty=function(a){if(a){if(this.isArray(a))return!!a.length;for(var e in a)return!1;return!0}return!1};var i=function(a,h,l){for(var d=arguments,c,b=1;b<d.length;b++){c=d[b];for(var f in c)a[f]=e.isArray(c[f])?c[f].concat():e.isObject(c[f])?a[f]&&e.isArray(a[f])?i({},c[f]):i({},a[f],c[f]):c[f]}return a},j=function(a){if(e.isArray(a))return a.concat();if(e.isArguments(a)){for(var h=[],l=0,d;d=a[l];l++)h.push(j(d));return h}if(e.isObject(a))return i({},
a);throw Error("the argument isn't an object or array");};this.merge=i;this.duplicate=j;this.extend=function(a,e){i(a,e);a.prototype=i({},e.prototype,a.prototype)}});
Z.$package("Z",function(e){var h=function(){},i=function(){return this.className},j=function(a,d){1===arguments.length&&(d=a,a={});d=d||{};if(!e.isFunction(d.init))d.init=h;var c=function(){return this.init.apply(this,arguments)},b=a.extend;if(b){if("interface"===b.type&&e.isArray(b.methods)&&e.isFunction(b.checkImplements))throw Error("can not extend a interface!");var f=b.prototype.init,n=d.init,g=e.duplicate(b.prototype);delete g.init;c.prototype=e.merge({},b.prototype,d);var j=d;c.prototype.init=
function(){var b=e.duplicate(arguments);f.apply(this,b);this.$static=c;b=e.duplicate(arguments);n.apply(this,b);var d=this;this.$super={};for(var a in g)e.isFunction(g[a])&&j[a]&&(this.$super[a]=function(b){return function(){g[b].apply(d,arguments)}}(a))}}else n=d.init,c.prototype=d,c.prototype.init=function(){this.$static=c;n.apply(this,arguments)};c.type="class";c.className=a.name||"anonymous";c.toString=i;if(b=a["implements"]){var k=[],m,o;for(o in b)m=b[o].checkImplements(c.prototype),k=k.concat(m);
if(k.length)throw Error("the '"+c.className+"' class hasn't implemented the interfaces's methods . ["+k+"]");}a.statics&&e.merge(c,a.statics);return c},a=function(a){var d=[],c,b;for(b in this.methods)c=a[this.methods[b]],(!c||!e.isFunction(c))&&d.push(methods[b]);return d},k=function(l,d){1===arguments.length&&(d=l,l={});var c=function(){throw Error("the interface can not be Instantiated!");};c.type="interface";c.interfaceName=l.name||"anonymous";c.methods=d;c.checkImplements=a;return c};this.define=
function(a,d,c){var b=Array.prototype.slice.call(arguments,1);if("class"===a)return j.apply(this,b);if("interface"===a)return k.apply(this,b)};this.$class=j;this.$interface=k});
Z.$package("Z.message",function(e){var h,i=0,j=function(){if(!h&&(h=document.createElement("div"),!document.createEvent))h.style.cssText="position: absolute; top: -9999em; left: -9999em; width: 0px; height: 0px;",document.body.appendChild(h);return h},a=function(a,d,c){var b,f,e,g;if(2>arguments.length)throw Error("addListener arguments not enough");2===arguments.length&&(c=d,d=a,a=window);if(!a.__listeners)a.__listeners={},a.__listenerId=+new Date+""+i++;e=a.__listeners;g=a.__listenerId;if(e[d])for(f in e[d]){if(b=
e[d][f],b.func===c)return!1}else e[d]=[];f=j();f.addEventListener?(b=function(b){c.apply(window,b.params)},f.addEventListener(g+"-"+d,b,!1)):(b=function(b){var b=window.event,a=b.params.pop();d===b.params[1]&&a===g&&c.apply(window,b.params)},f.attachEvent("onpropertychange",b));b={func:c,wrapFunc:b};e[d].push(b);return!0},k=function(a,d,c){var b,f,e,g;if(2>arguments.length)throw Error("removeListener arguments not enough");2===arguments.length&&(c=d,d=a,a=window);e=a.__listeners;g=a.__listenerId;
if(!e||!e[d])return!1;f=j();for(var h in e[d])if(b=e[d][h],b.func===c)return e[d].slice(h,1),f.removeEventListener?f.removeEventListener(g+"-"+d,b.wrapFunc,!1):f.detachEvent("onpropertychange",b.wrapFunc),!0;return!1};this.on=this.addListener=a;this.off=this.removeListener=k;this.notify=function(a,d,c){var b,f,h,g;1===arguments.length?(d=a,a=window):2===arguments.length&&e.isString(a)&&(c=d,d=a,a=window);e.debug("notify message: "+d);h=a.__listeners;g=a.__listenerId;if(!h||!h[d])return!1;b=j();document.createEvent?
(f=document.createEvent("Events"),f.initEvent(g+"-"+d,!1,!1),f.params=[c,d],b.dispatchEvent(f)):(f=document.createEventObject("onpropertychange"),f.params=[c,d,g],b.fireEvent("onpropertychange",f));return 0!==h[d].length}});
