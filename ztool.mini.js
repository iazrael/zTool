(function(e){var g={UNDEFINED:0,BUILDED:1,LOADED:2,INITED:3},k={},j={},a=function(b){if(k[b])return k[b];var b=b.split("."),h=window,d;for(d in b){if(!(b[d]in h))return e;h=h[b[d]]}return h},i=function(b){return(b=a(b))?b.packageStatus:g.UNDEFINED},l=function(b,h,c){"string"===typeof b&&(b=a(b));var f={},e=a("Z");if(h)for(var i in h)f[i]=a(h[i]);c&&c.call(b,e,f);b.packageStatus=g.INITED;b=b.packageName;if(h=j[b]){for(f=0;f<h.length;f++)c=h[f],d(c.requirePackages)&&l(c.packageName,c.requirePackages,
c.constructor);delete j[b]}},d=function(b){if(!b)return!0;var d,c;for(c in b)if(d=b[c],i(d)!==g.INITED)return!1;return!0},c=function(){var b,c,a;b=arguments[0];3===arguments.length?(c=arguments[1],a=arguments[2]):a=arguments[1];var f;f=k[b];if(!f){f=window;var e=b.split("."),i;for(i in e)e[i]in f||(f[e[i]]={}),f=f[e[i]];k[b]=f}if(!("packageName"in f))f.packageName=b;if(!("packageStatus"in f))f.packageStatus=g.BUILDED;if(f.packageStatus===g.BUILDED)f.packageStatus=g.LOADED;if(c&&!d(c))for(var m in c)f=
c[m],j[f]||(j[f]=[]),j[f].push({packageName:b,requirePackages:c,constructor:a});else l(f,c,a)};c("Z",function(b){b.PACKAGE_STATUS=g;b.$package=c;b.getPackage=a;b.getPackageStatus=i})})();
Z.$package("Z",function(e){this.debug=function(a){window.console&&(console.debug?console.debug(a):console.log(a))};var g=Object.prototype.toString;this.is=function(a,e){var l=g.call(e).slice(8,-1);return void 0!==e&&null!==e&&l===a};this.isString=function(a){return"[object String]"===g.call(a)};this.isArray=Array.isArray||function(a){return"[object Array]"===g.call(a)};this.isArguments=function(a){return"[object Arguments]"===g.call(a)};this.isObject=function(a){return"[object Object]"===g.call(a)};
this.isFunction=function(a){return"[object Function]"===g.call(a)};this.isUndefined=function(a){return"[object Undefined]"===g.call(a)};this.isEmpty=function(a){if(a){if(this.isArray(a))return!!a.length;for(var e in a)return!1;return!0}return!1};var k=function(a,g,l){for(var d=arguments,c,b=1;b<d.length;b++){c=d[b];for(var h in c)a[h]=e.isArray(c[h])?c[h].concat():e.isObject(c[h])?a[h]&&e.isArray(a[h])?k({},c[h]):k({},a[h],c[h]):c[h]}return a},j=function(a){if(e.isArray(a))return a.concat();if(e.isArguments(a)){for(var g=
[],l=0,d;d=a[l];l++)g.push(j(d));return g}if(e.isObject(a))return k({},a);throw Error("the argument isn't an object or array");};this.merge=k;this.duplicate=j;this.extend=function(a,e){k(a,e);a.prototype=k({},e.prototype,a.prototype)}});
Z.$package("Z",function(e){var g=function(){},k=function(){return this.className},j=function(a,d){1===arguments.length&&(d=a,a={});d=d||{};if(!e.isFunction(d.init))d.init=g;var c=function(){return this.init.apply(this,arguments)},b=a.extend;if(b){if("interface"===b.type&&e.isArray(b.methods)&&e.isFunction(b.checkImplements))throw Error("can not extend a interface!");var h=b.prototype.init,n=d.init,f=e.duplicate(b.prototype);delete f.init;c.prototype=e.merge({},b.prototype,d);var j=d;c.prototype.init=
function(){var b=e.duplicate(arguments);h.apply(this,b);this.$static=c;b=e.duplicate(arguments);n.apply(this,b);this.$super={};for(var a in f)e.isFunction(f[a])&&j[a]&&(j[a]=function(b,c){return function(){var a=this.$super;this.$super=b;c.apply(this,arguments);this.$super=a}}(f[a],j[a]))}}else n=d.init,c.prototype=d,c.prototype.init=function(){this.$static=c;n.apply(this,arguments)};c.type="class";c.className=a.name||"anonymous";c.toString=k;if(b=a["implements"]){var i=[],m,o;for(o in b)m=b[o].checkImplements(c.prototype),
i=i.concat(m);if(i.length)throw Error("the '"+c.className+"' class hasn't implemented the interfaces's methods . ["+i+"]");}a.statics&&e.merge(c,a.statics);return c},a=function(a){var d=[],c,b;for(b in this.methods)c=a[this.methods[b]],(!c||!e.isFunction(c))&&d.push(methods[b]);return d},i=function(e,d){1===arguments.length&&(d=e,e={});var c=function(){throw Error("the interface can not be Instantiated!");};c.type="interface";c.interfaceName=e.name||"anonymous";c.methods=d;c.checkImplements=a;return c};
this.define=function(a,d,c){var b=Array.prototype.slice.call(arguments,1);if("class"===a)return j.apply(this,b);if("interface"===a)return i.apply(this,b)};this.$class=j;this.$interface=i});
Z.$package("Z.message",function(e){var g,k=0,j=function(){if(!g&&(g=document.createElement("div"),!document.createEvent))g.style.cssText="position: absolute; top: -9999em; left: -9999em; width: 0px; height: 0px;",document.body.appendChild(g);return g},a=function(a,d,c){var b,h,e,f;if(2>arguments.length)throw Error("addListener arguments not enough");2===arguments.length&&(c=d,d=a,a=window);if(!a.__listeners)a.__listeners={},a.__listenerId=+new Date+""+k++;e=a.__listeners;f=a.__listenerId;if(e[d])for(h in e[d]){if(b=
e[d][h],b.func===c)return!1}else e[d]=[];h=j();h.addEventListener?(b=function(b){c.apply(window,b.params)},h.addEventListener(f+"-"+d,b,!1)):(b=function(b){var b=window.event,a=b.params.pop();d===b.params[1]&&a===f&&c.apply(window,b.params)},h.attachEvent("onpropertychange",b));b={func:c,wrapFunc:b};e[d].push(b);return!0},i=function(a,d,c){var b,e,g,f;if(2>arguments.length)throw Error("removeListener arguments not enough");2===arguments.length&&(c=d,d=a,a=window);g=a.__listeners;f=a.__listenerId;
if(!g||!g[d])return!1;e=j();for(var i in g[d])if(b=g[d][i],b.func===c)return g[d].slice(i,1),e.removeEventListener?e.removeEventListener(f+"-"+d,b.wrapFunc,!1):e.detachEvent("onpropertychange",b.wrapFunc),!0;return!1};this.on=this.addListener=a;this.off=this.removeListener=i;this.notify=function(a,d,c){var b,h,g,f;1===arguments.length?(d=a,a=window):2===arguments.length&&e.isString(a)&&(c=d,d=a,a=window);e.debug("notify message: "+d);g=a.__listeners;f=a.__listenerId;if(!g||!g[d])return!1;b=j();document.createEvent?
(h=document.createEvent("Events"),h.initEvent(f+"-"+d,!1,!1),h.params=[c,d],b.dispatchEvent(h)):(h=document.createEventObject("onpropertychange"),h.params=[c,d,f],b.fireEvent("onpropertychange",h));return 0!==g[d].length}});
