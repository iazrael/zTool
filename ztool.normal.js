(function(c,d){this[c]=d();if("undefined"!==typeof module)module.exports=exports=this[c]})("zTool",function(){var c=this,d={varsion:"1.0",author:"azrael"};d.$package=function(b,g){var a;if(b){a=c;var f=b.split("."),e;for(e in f)f[e]in a||(a[f[e]]={}),a=a[f[e]]}else a=c;g.call(a,d)};return d});
zTool.$package("zTool.array",function(){this.remove=function(c,d,b){var g=!1;if(2===arguments.length){var a=c.indexOf(d);-1!==a&&(c.splice(a,1),g=!0)}else for(var a=0,f=c.length;a<f;a++)if(c[a][d]===b){c.splice(a,1);g=!0;break}return g};this.filter=function(c,d,b){var g=[],a;for(a in c)c[a][d]===b&&g.push(c[a]);return g};this.contains=function(c,d){return-1<c.indexOf(d)};this.uniquelize=function(c){for(var d=[],b=0,g=c.length;b<g;b++)this.contains(d,c[b])||d.push(c[b]);return d};this.parse=function(c){return Array.prototype.slice.call(c)};
this.forEach=function(c,d,b){var g=null;if(!this.isArray(c))if(this.isObject(c)){var g=[],a;for(a in c)c.hasOwnProperty(a)&&g.push(a)}else throw Error("not an array or a object");var f=-1,e=(g||c).length,h=function(){if(++f>=e)b&&b(e);else{var a=g?g[f]:f;d&&d(c[a],a,h)}};h()}});
zTool.$package("zTool.browser",function(c){var d=this;(function(){var a={set:function(e,a){this.name=e;this.version=a;this[e]=a}},b,e=navigator.userAgent.toLowerCase();(b=e.match(/msie ([\d.]+)/))?a.set("ie",b[1]):(b=e.match(/firefox\/([\d.]+)/))?a.set("firefox",b[1]):(b=e.match(/chrome\/([\d.]+)/))?a.set("chrome",b[1]):(b=e.match(/opera.([\d.]+)/))?a.set("opera",b[1]):(b=e.match(/version\/([\d.]+).*safari/))&&a.set("safari",b[1]);Z.merge(d,a)})();var b={ie:"Ms",firefox:"Moz",opera:"O",chrome:"Webkit",
safari:"Webkit"},g;this.cssSupport=function(a,d,e){var h;g||(g=document.createElement("div"));h=g;if(a in h.style)return h.style[a]=d,h.style[a]===d;return e?(e=a.charAt(0).toUpperCase(),a=b[c.browser.name]+e+a.substr(1),cssSupport(a,!1,d)):!1}});
zTool.$package("zTool",function(c){var d=function(){},b=/this.\$super/;this.$class=function(g,a){1===arguments.length&&(a=g,g={});a=a||{};if(!c.isFunction(a.init))a.init=d;var f=function(){return this.init.apply(this,arguments)},e=g.extend;if(e){if(isInterface(e))throw Error("can not extend a interface!");var h=e.prototype.init,m=a.init,l=c.duplicate(e.prototype);delete l.init;var e=f.prototype=c.merge({},e.prototype,a),j,k,i;for(i in l)j=e[i],k=l[i],c.isFunction(k)&&c.isFunction(j)&&b.test(j)&&(e[i]=
function(e,a){return function(){var b=this.$super;this.$super=e;a.apply(this,arguments);this.$super=b}}(k,j));f.prototype.init=function(){var e=c.duplicate(arguments);h.apply(this,e);this.$static=f;m.apply(this,arguments)}}else m=a.init,f.prototype=a,f.prototype.init=function(){this.$static=f;m.apply(this,arguments)};f.prototype.constructor=f;f.type="class";f.className=g.name||"anonymous";g.statics&&c.merge(f,g.statics);return f}});
zTool.$package("zTool.cookie",function(c){var d=window.location.host;this.set=function(b,g,a,f,e){if(e){var h=new Date;h.setTime(+new Date+36E5*e)}c.isString(g)||(g=JSON.stringify(g));g=window.encodeURIComponent(g);window.document.cookie=b+"="+g+"; "+(e?"expires="+h.toGMTString()+"; ":"")+(f?"path="+f+"; ":"path=/; ")+(a?"domain="+a+";":"domain="+d+";")};this.get=function(b){b=window.document.cookie.match(RegExp("(?:^|;+|\\s+)"+b+"=([^;]*)"));b=!b?"":b[1];b=window.decodeURIComponent(b);try{b=JSON.parse(b)}catch(g){}return b};
this.remove=function(b,g,a){window.document.cookie=b+"=; expires=Mon, 26 Jul 1997 05:00:00 GMT; "+(a?"path="+a+"; ":"path=/; ")+(g?"domain="+g+";":"domain="+d+";")}});
zTool.$package("zTool.date",function(){this.format=function(c,d){var b={"M+":c.getMonth()+1,"d+":c.getDate(),"h+":c.getHours(),"m+":c.getMinutes(),"s+":c.getSeconds(),"q+":Math.floor((c.getMonth()+3)/3),S:c.getMilliseconds()};/(y+)/.test(d)&&(d=d.replace(RegExp.$1,(c.getFullYear()+"").substr(4-RegExp.$1.length)));for(var g in b)RegExp("("+g+")").test(d)&&(d=d.replace(RegExp.$1,1==RegExp.$1.length?b[g]:("00"+b[g]).substr((""+b[g]).length)));return d}});
zTool.$package("zTool.file",function(c){this.ImageLoader=c.$class({init:function(){this._imageList={}},load:function(c,b,g){var a=this._imageList[c];a||(a={url:c,status:0,cbs:[]},this._imageList[c]=a);if(2===a.status)b.call(g||window,!0,c,a.size);else if(1===a.status)a.cbs.push({cb:b,cxt:g});else{a.cbs.push({cb:b,cxt:g});a.status=1;var b=new Image,f=this;b.onload=function(){var e=f._imageList[this.src];e.status=2;e.size={width:this.width,height:this.height};for(var a=0,b;b=e.cbs[a];a++)b.cb.call(b.cxt||
window,!0,e.url,e.size);e.cbs=[]};g=function(){var e=f._imageList[this.src];e.status=3;for(var a=0,b;b=e.cbs[a];a++)b.cb.call(b.cxt||window,!1,e.url);e.cbs=[]};b.onerror=g;b.onabort=g;b.src=c}}})});
zTool.$package("zTool.message",function(c){var d,b=0,g=function(){if(!d&&(d=document.createElement("div"),!document.createEvent))d.style.cssText="position: absolute; top: -9999em; left: -9999em; width: 0px; height: 0px;",document.body.appendChild(d);return d},a=function(e,a,d,f){var j,k,i,n;if(2>arguments.length)throw Error("addListener arguments not enough");c.isString(e)&&(f=d,d=a,a=e,e=window);f||(f=window);if(!e.__listeners)e.__listeners={},e.__listenerId=+new Date+""+b++;i=e.__listeners;n=e.__listenerId;
if(i[a])for(k in i[a]){if(j=i[a][k],j.func===d)return!1}else i[a]=[];k=g();k.addEventListener?(j=function(e){d.apply(f,e.params);f=null},k.addEventListener(n+"-"+a,j,!1)):(j=function(e){var e=window.event,b=e.params.pop();a===e.params[1]&&b===n&&(d.apply(f,e.params),f=null)},k.attachEvent("onpropertychange",j));j={func:d,wrapFunc:j};i[a].push(j);return!0},f=function(e,a,b){var c,d,f,i;if(2>arguments.length)throw Error("removeListener arguments not enough");2===arguments.length&&(b=a,a=e,e=window);
f=e.__listeners;i=e.__listenerId;if(!f||!f[a])return!1;d=g();for(var n in f[a])if(c=f[a][n],c.func===b)return f[a].slice(n,1),d.removeEventListener?d.removeEventListener(i+"-"+a,c.wrapFunc,!1):d.detachEvent("onpropertychange",c.wrapFunc),!0;return!1};this.on=this.addListener=a;this.off=this.removeListener=f;this.notify=function(e,a,b){var d,f,k,i;1===arguments.length?(a=e,e=window):2===arguments.length&&c.isString(e)&&(b=a,a=e,e=window);c.debug("notify message: "+a);k=e.__listeners;i=e.__listenerId;
if(!k||!k[a])return!1;d=g();document.createEvent?(f=document.createEvent("Events"),f.initEvent(i+"-"+a,!1,!1),f.params=[b,a],d.dispatchEvent(f)):(f=document.createEventObject("onpropertychange"),f.params=[b,a,i],d.fireEvent("onpropertychange",f));return 0!==k[a].length}});
zTool.$package("zTool.number",function(){this.format=function(c,d){for(var b=c.toString().split("."),g=d?d.split("."):[""],a="",f=b[0],e=g[0],h=f.length-1,m=!1,l=e.length-1;0<=l;l--)switch(e.substr(l,1)){case "#":0<=h&&(a=f.substr(h--,1)+a);break;case "0":a=0<=h?f.substr(h--,1)+a:"0"+a;break;case ",":m=!0,a=","+a}if(0<=h)if(m)for(e=f.length;0<=h;h--)a=f.substr(h,1)+a,0<h&&0==(e-h)%3&&(a=","+a);else a=f.substr(0,h+1)+a;a+=".";f=1<b.length?b[1]:"";e=1<g.length?g[1]:"";for(l=h=0;l<e.length;l++)switch(e.substr(l,
1)){case "#":h<f.length&&(a+=f.substr(h++,1));break;case "0":a=h<f.length?a+f.substr(h++,1):a+"0"}return a.replace(/^,+/,"").replace(/\.$/,"")};this.getMaxMin=function(c){var d=0,b=0,g=c.length;if(0<g)for(var b=c[0],a=0;a<g;a++)c[a]>d?d=c[a]:c[a]<b&&(b=c[a]);return{max:d,min:b}};this.random=function(c,d){return Math.floor(Math.random()*(d-c+1)+c)}});
zTool.$package("zTool",function(c){this.debug=function(a){"undefined"!=typeof console&&(console.debug?console.debug(a):console.log(a))};var d=Object.prototype.toString,b=this.is=function(a,b){var c=d.call(a).slice(8,-1);return void 0!==a&&null!==a&&c===b};this.isString=function(a){return b(a,"String")};this.isArray=Array.isArray||function(a){return b(a,"Array")};this.isArguments=function(a){return b(a,"Arguments")};this.isObject=function(a){return b(a,"Object")};this.isFunction=function(a){return b(a,
"Function")};this.isUndefined=function(a){return b(a,"Undefined")};this.isBoolean=function(a){return b(a,"Boolean")};this.isNumber=function(a){return b(a,"Number")};var g=function(a,b,d){if(a===b||!a&&!b)return!0;for(var f in a)if(a.hasOwnProperty(f))if(c.isObject(a[f])&&c.isObject(b[f])&&d){if(!g(a[f],b[f],d))return!1}else if(a[f]!==b[f])return!1;return!0},a=function(b,d,f){for(var g=arguments,j,k=1;k<g.length;k++){j=g[k];for(var i in j)b[i]=c.isArray(j[i])?j[i].concat():c.isObject(j[i])?b[i]&&c.isArray(b[i])?
a({},j[i]):a({},b[i],j[i]):j[i]}return b},f=function(b){if(c.isArray(b))return b.concat();if(c.isArguments(b)){for(var d=[],g=0,l;l=b[g];g++)d.push(f(l));return d}return c.isObject(b)?a({},b):b};this.isEmpty=function(a){if(a){if(this.isArray(a))return!!a.length;for(var b in a)return!1;return!0}return!1};this.isSame=g;this.merge=a;this.duplicate=f;this.extend=function(b,d){b.prototype=a({},d.prototype,b.prototype);b.prototype.constructor=b}});
zTool.$package("zTool.storage",function(c){var d=c.$class({name:"Storage"},{init:function(b){this._storage=b},isSupport:function(){return null!=this._storage},set:function(b,d){return this.isSupport()?(c.isString(d)||(d=JSON.stringify(d)),this._storage.setItem(b,d),!0):!1},get:function(b){if(this.isSupport()){b=this._storage.getItem(b);try{b=JSON.parse(b)}catch(d){}return b}return!1},remove:function(b){return this.isSupport()?(this._storage.removeItem(b),!0):!1},clear:function(){return this.isSupport()?
(this._storage.clear(),!0):!1}});this.local=new d(window.localStorage);this.session=new d(window.sessionStorage)});
zTool.$package("zTool.string",function(c){this.toQueryString=function(d){var b=[],c;for(c in d)b.push(encodeURIComponent(""+c)+"="+encodeURIComponent(""+value));return b.join("&")};this.format=function(d,b,c){if(0==arguments.length)return null;for(var d=arguments[0],a=1;a<arguments.length;a++)d=d.replace(RegExp("\\{"+(a-1)+"\\}","gm"),arguments[a]);return d};this.sizeof=function(d,b){var c=0,a,f,e,b=b?b.toLowerCase():"";if("utf-16"===b||"utf16"===b)for(f=0,e=d.length;f<e;f++)a=d.charCodeAt(f),c=65535>=
a?c+2:c+4;else for(f=0,e=d.length;f<e;f++)a=d.charCodeAt(f),c=127>=a?c+1:2047>=a?c+2:65535>=a?c+3:c+4;return c};this.capital=function(d){return c.isEmpty(d)?"":d.charAt(0).toUpperCase()+d.substring(1)};this.endsWith=function(c,b){return c.lastIndexOf(b)+b.length==c.length}});
